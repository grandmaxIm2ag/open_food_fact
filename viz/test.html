<!DOCTYPE html>
<html>
  <head>    
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Testing Pie Chart</title>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?2.1.3"></script>

    <style type="text/css">
        .slice text {
            font-size: 16pt;
            font-family: Arial;
        }   
    </style>
  </head>
  <body>
  	<script src="../vendor/d3/d3.js"></script>
  	<script src="data_manager.js"></script>
    <script type="text/javascript">

    var data = {one:20, two:50, three:30};
    var data2 = [{ a:1, b:"az", c:2 },
	    		 { a:3, b:"er", c:4 },
	    		 { a:5, b:"az", c:6 },
	    		 { a:7, b:"az", c:8 },
	    		 { a:9, b:"er", c:0 }];
/*
	function countBy(collection, col) {
		var object = Object.create(null);
		collection.forEach(function(item) {
			var key = item[col];
			if (key in object) { ++object[key]; }
			else { object[key] = 1;	}
		});
		var array = [];
    	Object.keys(object).forEach( key => array.push({ key:key, value:object[key] }) );
		return array;
	}
*/
		function countBy(collection, col) {
			var object = Object.create(null);
			var array = [];
			var c=0;
			collection.forEach(function(e) {
				k = e[col];
				if (k in object) { array[object[k]].value++; }
				else {
					object[k] = c++;
					array.push({ key:k, value:1 });
				}
			});
			return array;
		}
	
	var cb = countBy(data2, 'b');
//	document.write(JSON.stringify(cb));
		
	d3.tsv("../tsv/hypotesis.tsv", function(error, data) {
    	if(error) throw error;
    	
    	var final = countBy(data, 'Continent');
    });
    
	function sumProp(collection) {
		return collection.reduce(function(tot,cur){return tot+cur.a;},0);;
	}
	console.log(sumProp(data2));
    	
/*
d3.select("body").selectAll("p")
    .data(data2)
    .enter()
    .append("p")
    .text(data2);
*/
    </script>
  </body>
</html>

